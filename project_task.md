Техническое задание: Система тестирования сотрудников1. Общее описание проектаЦель: Разработать систему для внутреннего тестирования сотрудников.Архитектура:Backend: Локальный сервер Node.js.Frontend (Тестируемый): Telegram Bot.Frontend (Администратор): Локальное веб-приложение на React.Ключевые требования:Регистрация пользователя (Имя) перед началом теста.Формирование случайного теста из 30 вопросов из общего банка в 90 вопросов.Интерфейс с выбором одного варианта ответа.Логирование результатов.Административная панель для просмотра результатов.2. Компонент 1: Backend (Node.js Server)Сервер отвечает за всю бизнес-логику, управление состоянием пользователей, API для React и хранение данных.Технический стек (Рекомендация):Runtime: Node.jsAPI (для Telegram): node-telegram-bot-api (в режиме Long Polling).API (для React): Express.js.База данных (Локальная): SQLite (рекомендуется для простоты развертывания) или файловая система (JSON).2.1. Хранение данныхБанк вопросов: Должен храниться в файле questions.json в корне проекта.База данных (SQLite): Должна хранить две основные таблицы:TestSessions: Сессии тестирования.id (PK, INTEGER)user_name (TEXT)telegram_id (INTEGER, UNIQUE)score (INTEGER)total_questions (INTEGER, по умолчанию 30)timestamp (DATETIME)TestLogs: Детальные ответы.id (PK, INTEGER)session_id (FK, INTEGER, ссылка на TestSessions.id)question_text (TEXT)options (TEXT, JSON)user_answer_index (INTEGER)correct_answer_index (INTEGER)2.2. Логика Telegram Bot (Long Polling)Управление состоянием (State Machine): Сервер должен отслеживать состояние каждого telegram_id (например, idle, awaiting_name, testing).Команда /start:Приветствовать пользователя.Проверить, есть ли telegram_id в TestSessions.Если нет (или тест пройден), запросить "Введите Ваше Имя и Фамилию". Установить состояние awaiting_name.Обработка имени (состояние awaiting_name):Получить текстовое сообщение (Имя).Создать новую запись в TestSessions с этим именем.Вызвать Функцию 2.3 (Запуск теста).Обработка ответов (Callback Query):Получить callback_data (должен содержать индекс ответа).Валидировать ответ (сравнить с correct_answer_index).Записать результат в TestLogs.Обновить score в TestSessions.Отправить следующий вопрос или завершить тест.2.3. Функция: Запуск тестаЗагрузить questions.json.Выбрать 30 случайных вопросов (алгоритм тасования, например, Fisher-Yates).Сохранить эти 30 вопросов в TestLogs (для фиксации, какие вопросы были заданы).Отправить пользователю первый вопрос (Функция 2.4).2.4. Функция: Отправка вопросаСформировать сообщение: "Вопрос N из 30: [Текст вопроса]".Сформировать inline_keyboard на основе вариантов ответов. callback_data для каждой кнопки должен быть answer_[index] (например, answer_0, answer_1).2.5. API для React Admin (Express.js)Сервер должен предоставлять локальный API (например, на http://localhost:3001):GET /api/resultsОписание: Получить список всех завершенных сессий.Ответ (JSON): Массив объектов [{ id, user_name, score, total_questions, timestamp }, ...].GET /api/results/:sessionIdОписание: Получить детальную информацию по конкретной сессии.Ответ (JSON): Объект с двумя полями:sessionInfo: { id, user_name, score, ... }logs: Массив записей из TestLogs, отсортированных по порядку.3. Компонент 2: Frontend (Telegram Bot)Интерфейс для тестируемых. Вся логика реализуется на Backend.Команда /start: Инициирует диалог приветствия и регистрации.Интерфейс теста:Вопросы отправляются как обычные сообщения.Варианты ответов предоставляются исключительно через InlineKeyboardMarkup (кнопки под сообщением).Обратная связь:После нажатия на кнопку ответа, бот должен редактировать сообщение (например, убирая кнопки), чтобы предотвратить повторный ответ.После 30-го вопроса бот должен отправить итоговое сообщение: "Тестирование завершено. Ваш результат: [Score] из 30."4. Компонент 3: Frontend (Admin Panel)Локальное веб-приложение для просмотра результатов.Технический стек (Рекомендация):Библиотека: ReactЗапросы: axios или fetchРоутинг: react-router-dom4.1. Страница 1: "Список результатов" (Главная, /)Компонент: ResultsDashboardЛогика: При загрузке выполняет GET запрос к http://localhost:3001/api/results.Интерфейс: Таблица с колонками:ИмяДата/ВремяРезультат (Score / Total)Действие (кнопка/ссылка "Детали")Каждая строка (или кнопка "Детали") должна быть ссылкой (Link) на страницу ResultDetail, передавая sessionId.4.2. Страница 2: "Детализация теста" (/session/:id)Компонент: ResultDetailЛогика:Получает id сессии из URL (через useParams).Выполняет GET запрос к http://localhost:3001/api/results/:id.Интерфейс:Шапка: Отображает общую информацию (sessionInfo): Имя, Итоговый счет.Список ответов: Итерирует массив logs. Для каждого элемента log отображает:Вопрос: log.question_textВарианты: log.options (можно выделить правильный)Ответ пользователя: log.options[log.user_answer_index] (выделить зеленым, если user_answer_index === correct_answer_index, иначе красным).Правильный ответ (если пользователь ошибся): log.options[log.correct_answer_index]5. Структура данных (JSON)questions.jsonФайл должен содержать массив из 90 объектов.Структура объекта:[
  {
    "id": 1,
    "question": "Текст вопроса 1?",
    "options": [
      "Вариант ответа А",
      "Вариант ответа Б",
      "Вариант ответа В"
    ],
    "correctAnswerIndex": 0
  },
  {
    "id": 2,
    "question": "Текст вопроса 2?",
    "options": [
      "Вариант ответа А",
      "Вариант ответа Б",
      "Вариант ответа В"
    ],
    "correctAnswerIndex": 1
  }
  // ... и так далее 90 вопросов
]
